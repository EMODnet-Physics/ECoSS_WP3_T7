# WP3_T7
Design and implementation of a pipeline that:
1. **Process**, given user specifications, the data generated by the WP2_T3 pipeline to **create the clips to train the AI models**.
2. **Implements** the three selected **AI models** (Vggish, PaSST, EffAT) and well as an **standardized way** of **training, testing and performing inference** with them.

The project uses [Poetry](https://python-poetry.org/) for dependency management and packaging. Before running any code, ensure Poetry is installed and configured properly:

- **Windows users**: Use the command `poetry install --with intel`
- **Linux users**: Use the command `poetry install --without intel`

The **repository** contains the **following structure**:
1. **scripts**: In here the three scripts related to train, test and inference can be found.
2. **src/**:
   2.1. **config/**: Here, all the **.yaml files** that contain all the **modificable parameters** for the training and testing of each AI model are found.
   2.2. **models/**: Here, the **implementations** and **architectures** of the three models are found.
   2.3. **pipeline/**:
        2.3.1. **dataset.py**: The python script that contains the **EcossDataset class**, which is responsible for all the **modelling and processing of the datasets.**
        2.3.2. **utils.py**: A python script with all the **useful classes** and functions used both in the EcossDataset class and in the classes related to the AI models.
        2.3.3. **effat_model.py**: A python script that contains the **EffAtModel class**, which is responsible for **training, testing and performing inference with the EfficientAT model** (see [EffAT repo](https://github.com/fschmid56/EfficientAT)).
        2.3.4. **passt_model.py**: A python script that contains the **PasstModel class**, which is responsible for **training, testing and performing inference with the PasstModel model** (see [PaSST repo](https://github.com/kkoutini/PaSST)).
        2.3.5. **vggish_model.py**: A python script that contains the **VggishModel class**, which is responsible for **training, testing and performing inference with the VggishModel model** (see [Vggish repo] (https://github.com/tensorflow/models/blob/master/research/audioset/vggish)).
3. **poetry.lock**: A file generated by poetry which contains all the **dependencies.**
4. **pyproject.toml**: A file that contains the **metadata** for the generated project as well as the **packages required**, its **versions** and the available **python versions**.

--------------------------------------------------------------

## POETRY FIRST TIME:
1. Install poetry on your base python virtual environment with "pip install poetry".
2. Write "poetry init" in order to create the project.
3. In the pyproject.toml file change the name parameter in [tool.poetry] for the name "pipeline".
4. Write "poetry config virtualenvs.in-project true". This will tell poetry to locate the .venv file that will be created in the root of the project.
5. Write "poetry install". This will create the .venv file and install all the packages and dependecies needed for your project.
6. In case you want to add more, simply write "poetry add package-name".

## POETRY AFTER FIRST CONFIGURATION:
1. Install poetry on your base python virtual environment with "pip install poetry".
2. Write "poetry config virtualenvs.in-project true". This will tell poetry to locate the .venv file that will be created in the root of the project.
3. Write "poetry install". This will create the .venv file and install all the packages and dependecies needed for your project.
4. In case you want to add dependecies and package, write "poetry add package-name".

## HOW TO RUN YOUR CODE WITH YOUR POETRY VENV?
Two ways:
1. Write "poetry shell". This will activate the venv and you will be able to navigate to your script and do "python X.py". In order to exit this shell write "exit".
2. Activate the venv manually.


## VGGISH POETRY
If you use linux, then you dont need the package tensorflow-intel because it will raise an error. Install everything like this: "poetry install --without intel".
If you use windows, then you will need the package tensorflow-intel because otherwise you will experience errors. Install everything like this: "poetry install --with intel".
